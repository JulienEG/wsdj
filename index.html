<!DOCTYPE html>
<html>
  <head>
    <title>WSDJ</title>
    <link rel="stylesheet" type="text/css" href="./css/reset.css" />
    <link rel="stylesheet" type="text/css" href="./css/style.css" />
    <script src="https://unpkg.com/tone"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js" defer></script>
    <script src="./js/app.js" defer></script>
  </head>

  <body>
    <div id="app">
      <header>
        <h1>WSDJ : A simplified LSDJ experience</h1>
      </header>

      <div class="main">
        <div class="center">
          <button @click="playSequence">Play Sequence</button>
          <button @click="stopSequence">Stop Sequence</button>
          <label for="bpm">BPM: {{ bpm }}</label>
          <input
            type="number"
            :value="bpm"
            @wheel.prevent="onScrollBpm"
            @keydown.prevent
            readonly
            min="1"
            max="255" />
          <label for="volumeDb">Volume: {{ volumeDb }} dB</label>
          <input
            type="range"
            :value="volumeDb"
            @wheel.prevent="onScrollVolume"
            @mousedown.prevent
            @touchstart.prevent
            min="-60"
            max="0"
            step="1" />
        </div>

        <div class="gameboy-wrapper">
          <div class="gameboy-case">
            <span class="lines"></span>
            <span class="lines"></span>
            <span class="lines"></span>
            <span class="lines"></span>
            <span class="lines"></span>
            <span class="lines"></span>
            <span class="lines"></span>
            <div class="gameboy-glass">
              <div class="gameboy-screen">
                <table>
                  <thead>
                    <tr>
                      <th>P</th>
                      <th colspan="3">Pu1</th>
                      <th colspan="3">Pu2</th>
                      <th colspan="3">Wav</th>
                      <th colspan="3">Noi</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr v-for="(row, rowIndex) in tableData" :key="rowIndex">
                      <!-- flèche -->
                      <td>
                        <span v-if="currentPlayingRow === rowIndex">➡️</span>
                      </td>

                      <!-- Note -->
                      <td>
                        <input
                          class="scroll-select"
                          type="text"
                          :value="notes[row[0].noteIndex]"
                          @wheel.prevent="onScrollCell($event, rowIndex, 0, 'noteIndex', 'notes')"
                          @click="onClickCell(rowIndex, 0, 'noteIndex')"
                          readonly />
                      </td>

                      <!-- Duration -->
                      <td>
                        <input
                          class="scroll-select"
                          type="text"
                          :value="durations[row[1].durationIndex]"
                          @wheel.prevent="onScrollCell($event, rowIndex, 1, 'durationIndex', 'durations')"
                          @click="onClickCell(rowIndex, 1, 'durationIndex')"
                          readonly />
                      </td>

                      <!-- Velocity -->
                      <td>
                        <input
                          class="scroll-select"
                          type="text"
                          :value="velocities[row[2].velocityIndex]"
                          @wheel.prevent="onScrollCell($event, rowIndex, 2, 'velocityIndex', 'velocities')"
                          @click="onClickCell(rowIndex, 2, 'velocityIndex')"
                          readonly />
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <h2>
              <span class="title">WSDJ</span>
              <span class="subtitle">A SIMPLIFIED LSDJ EXPERIENCE</span>
            </h2>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
