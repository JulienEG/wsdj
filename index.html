<!DOCTYPE html>
<html>
  <head>
    <title>WSDJ</title>
    <link rel="stylesheet" type="text/css" href="./css/reset.css" />
    <link rel="stylesheet" type="text/css" href="./css/style.css" />
    <script src="https://unpkg.com/tone"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js" defer></script>
    <script src="./js/app.js" defer></script>
  </head>

  <body>
    <div id="app">
      <header>
        <h1>WSDJ : A simplified LSDJ experience</h1>
      </header>

      <div class="main">
        <div class="center">
          <button @click="playSequence">▶ Play</button>
          <button @click="stopSequence">⏹ Stop</button>
          <label for="bpm">BPM: {{ bpm }}</label>
          <input
            type="number"
            :value="bpm"
            @wheel.prevent="onScrollBpm"
            @keydown.prevent
            readonly
            min="1"
            max="255" />
          <label for="volumeDb">Volume: {{ volumeDb }} dB</label>
          <input
            type="range"
            :value="volumeDb"
            @wheel.prevent="onScrollVolume"
            @mousedown.prevent
            @touchstart.prevent
            min="-60"
            max="0"
            step="1" />
        </div>

        <div class="gameboy-wrapper">
          <div class="gameboy-case">
            <span class="lines"></span>
            <span class="lines"></span>
            <span class="lines"></span>
            <span class="lines"></span>
            <span class="lines"></span>
            <span class="lines"></span>
            <span class="lines"></span>
            <div class="gameboy-glass">
              <div class="gameboy-screen">
                <table>
                  <thead>
                    <tr>
                      <th>P</th>
                      <th colspan="3">Pu1</th>
                      <th colspan="3">Pu2</th>
                      <th colspan="3">Wav</th>
                      <th colspan="3">Noi</th>
                    </tr>
                    <tr class="sub-head">
                      <th></th>
                      <!-- Pu1 labels -->
                      <th>Note</th><th>Dur</th><th>Vel</th>
                      <!-- Pu2 labels -->
                      <th>Note</th><th>Dur</th><th>Vel</th>
                      <!-- Wav labels -->
                      <th>Note</th><th>Dur</th><th>Vel</th>
                      <!-- Noi labels -->
                      <!-- <th>Note</th><th>Dur</th><th>Vel</th> -->
                    </tr>

                  </thead>
                  <tbody>
                    <tr v-for="(row, rowIndex) in tableData" 
                        :key="rowIndex"
                        :style="{ backgroundColor: rowIndex % 4 === 0 ? '#8db16c' : '#c2f394' }">
                  
                      <!-- flèche -->
                      <td>
                        <span v-if="currentPlayingRow === rowIndex">➡️</span>
                      </td>
                  
                      <!-- === PULSE 1 === -->
                      <td>
                        <input
                          class="scroll-select"
                          type="text"
                          :value="displayValue(row, 'pulse1', 'noteIndex')"
                          :style="{ backgroundColor: '#8db16c' }"
                          @wheel.prevent="onScrollCell($event, 'pulse1', 'noteIndex', rowIndex, 'notes')"
                          @click="onClickCell(rowIndex, 'pulse1', 'noteIndex')"
                          readonly
                        />
                      </td>
                      <td>
                        <input
                          class="scroll-select"
                          type="text"
                          :value="displayValue(row, 'pulse1', 'durationIndex')"
                          :style="{ backgroundColor: rowIndex % 4 === 0 ? '#8db16c' : '#c2f394' }"
                          @wheel.prevent="onScrollCell($event, 'pulse1', 'durationIndex', rowIndex, 'durations')"
                          @click="onClickCell(rowIndex, 'pulse1', 'durationIndex')"
                          readonly
                        />
                      </td>
                      <td>
                        <input
                          class="scroll-select"
                          type="text"
                          :value="displayValue(row, 'pulse1', 'velocityIndex')"
                          :style="{ backgroundColor: rowIndex % 4 === 0 ? '#8db16c' : '#c2f394' }"
                          @wheel.prevent="onScrollCell($event, 'pulse1', 'velocityIndex', rowIndex, 'velocities')"
                          @click="onClickCell(rowIndex, 'pulse1', 'velocityIndex')"
                          readonly
                        />
                      </td>
                  
                      <!-- === PULSE 2 === -->
                      <td>
                        <input
                          class="scroll-select"
                          type="text"
                          :value="displayValue(row, 'pulse2', 'noteIndex')"
                          :style="{ backgroundColor: '#8db16c' }"
                          @wheel.prevent="onScrollCell($event, 'pulse2', 'noteIndex', rowIndex, 'notes')"
                          @click="onClickCell(rowIndex, 'pulse2', 'noteIndex')"
                          readonly
                        />
                      </td>
                      <td>
                        <input
                          class="scroll-select"
                          type="text"
                          :value="displayValue(row, 'pulse2', 'durationIndex')"
                          :style="{ backgroundColor: rowIndex % 4 === 0 ? '#8db16c' : '#c2f394' }"
                          @wheel.prevent="onScrollCell($event, 'pulse2', 'durationIndex', rowIndex, 'durations')"
                          @click="onClickCell(rowIndex, 'pulse2', 'durationIndex')"
                          readonly
                        />
                      </td>
                      <td>
                        <input
                          class="scroll-select"
                          type="text"
                          :value="displayValue(row, 'pulse2', 'velocityIndex')"
                          :style="{ backgroundColor: rowIndex % 4 === 0 ? '#8db16c' : '#c2f394' }"
                          @wheel.prevent="onScrollCell($event, 'pulse2', 'velocityIndex', rowIndex, 'velocities')"
                          @click="onClickCell(rowIndex, 'pulse2', 'velocityIndex')"
                          readonly
                        />
                      </td>

                      <!-- === WAVE 3 === -->
                      <td>
                        <input
                          class="scroll-select"
                          type="text"
                          :value="displayValue(row, 'wave3', 'noteIndex')"
                          :style="{ backgroundColor: '#8db16c' }"
                          @wheel.prevent="onScrollCell($event, 'wave3', 'noteIndex', rowIndex, 'notes')"
                          @click="onClickCell(rowIndex, 'wave3', 'noteIndex')"
                          readonly
                        />
                      </td>
                      <td>
                        <input
                          class="scroll-select"
                          type="text"
                          :value="displayValue(row, 'wave3', 'durationIndex')"
                          :style="{ backgroundColor: rowIndex % 4 === 0 ? '#8db16c' : '#c2f394' }"
                          @wheel.prevent="onScrollCell($event, 'wave3', 'durationIndex', rowIndex, 'durations')"
                          @click="onClickCell(rowIndex, 'wave3', 'durationIndex')"
                          readonly
                        />
                      </td>
                      <td>
                        <input
                          class="scroll-select"
                          type="text"
                          :value="displayValue(row, 'wave3', 'velocityIndex')"
                          :style="{ backgroundColor: rowIndex % 4 === 0 ? '#8db16c' : '#c2f394' }"
                          @wheel.prevent="onScrollCell($event, 'wave3', 'velocityIndex', rowIndex, 'velocities')"
                          @click="onClickCell(rowIndex, 'wave3', 'velocityIndex')"
                          readonly
                        />
                      </td>

                      <!-- === NOISE 4 ===
                      <td>
                        <input
                          class="scroll-select"
                          type="text"
                          :value="displayValue(row, 'noise4', 'noteIndex')"
                          :style="{ backgroundColor: rowIndex % 4 === 0 ? '#8db16c' : '#c2f394' }"
                          @wheel.prevent="onScrollCell($event, 'noise4', 'noteIndex', rowIndex, 'notes')"
                          @click="onClickCell(rowIndex, 'noise4', 'noteIndex')"
                          readonly
                        />
                      </td>
                      <td>
                        <input
                          class="scroll-select"
                          type="text"
                          :value="displayValue(row, 'noise4', 'durationIndex')"
                          :style="{ backgroundColor: rowIndex % 4 === 0 ? '#8db16c' : '#c2f394' }"
                          @wheel.prevent="onScrollCell($event, 'noise4', 'durationIndex', rowIndex, 'durations')"
                          @click="onClickCell(rowIndex, 'noise4', 'durationIndex')"
                          readonly
                        />
                      </td>
                      <td>
                        <input
                          class="scroll-select"
                          type="text"
                          :value="displayValue(row, 'noise4', 'velocityIndex')"
                          :style="{ backgroundColor: rowIndex % 4 === 0 ? '#8db16c' : '#c2f394' }"
                          @wheel.prevent="onScrollCell($event, 'noise4', 'velocityIndex', rowIndex, 'velocities')"
                          @click="onClickCell(rowIndex, 'noise4', 'velocityIndex')"
                          readonly
                        />
                      </td> -->
                  
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <h2>
              <span class="title">WSDJ</span>
              <span class="subtitle">A SIMPLIFIED LSDJ EXPERIENCE</span>
            </h2>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
